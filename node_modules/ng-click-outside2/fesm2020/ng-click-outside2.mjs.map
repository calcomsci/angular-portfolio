{"version":3,"file":"ng-click-outside2.mjs","sources":["../../../projects/ng-click-outside2/src/lib/ng-click-outside.directive.ts","../../../projects/ng-click-outside2/src/lib/ng-click-outside.module.ts","../../../projects/ng-click-outside2/src/public-api.ts","../../../projects/ng-click-outside2/src/ng-click-outside2.ts"],"sourcesContent":["import {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges,\n} from '@angular/core';\nimport {DOCUMENT} from '@angular/common';\n\n/**\n * Directove to detect clicks outside of the current element\n *\n * ```typescript\n * @Component({\n *   selector: 'app',\n *   template: `\n *     <div (clickOutside)=\"onClickedOutside($event)\">Click outside this</div>\n *   `\n * })\n * export class AppComponent {\n *   onClickedOutside(e: Event) {\n *     console.log('Clicked outside:', e);\n *   }\n * }\n * ```\n */\n@Directive({\n  selector: '[clickOutside]',\n  standalone: true,\n})\nexport class NgClickOutsideDirective implements OnInit, OnChanges, OnDestroy {\n\n  /**\n   * Enables directive.\n   */\n  @Input() clickOutsideEnabled = true;\n\n  /**\n   * By default, the outside click event handler is automatically attached.\n   *\n   * Explicitely setting this to `true`sets the handler after the element is clicked. The outside click event handler\n   * will then be removed after a click outside has occurred.\n   */\n  @Input() attachOutsideOnClick = false;\n  /**\n   * Delays the initialization of the click outside handler.\n   * This may help for items that are conditionally shown ([see issue #13](https://github.com/arkon/ng-click-outside/issues/13)).\n   */\n  @Input() delayClickOutsideInit = false;\n  /**\n   *  If enabled, emits an event when user clicks outside of applications' window while it's visible.\n   *  Especially useful if page contains iframes.\n   */\n  @Input() emitOnBlur = false;\n\n  /**\n   * A comma-separated string of DOM element queries to exclude when clicking outside of the element.\n   * For example: `[exclude]=\"'button,.btn-primary'\"`.\n   */\n  @Input() exclude = '';\n  /**\n   * By default, `clickOutside` registers excluded DOM elements on init.\n   *\n   * This property refreshes the list before the `clickOutside` event is triggered. This is useful for ensuring that\n   * excluded elements added to the DOM after init are excluded (e.g. ng2-bootstrap popover: this allows for clicking\n   * inside the `.popover-content` area if specified in `exclude`).\n   */\n  @Input() excludeBeforeClick = false;\n\n  /**\n   * A comma-separated list of events to cause the trigger.\n   * ### For example, for additional mobile support:\n   * `[clickOutsideEvents]=\"'click,touchstart'\"`\n   */\n  @Input() clickOutsideEvents = '';\n\n  /**\n   * Outside Click Event\n   */\n  @Output() clickOutside: EventEmitter<Event> = new EventEmitter<Event>();\n\n  private _nodesExcluded: Array<HTMLElement> = [];\n  private _events: Array<string> = ['click'];\n\n  constructor(\n    private _el: ElementRef,\n    private _ngZone: NgZone,\n    @Inject(DOCUMENT) private document: Document) {\n    this._initOnClickBody = this._initOnClickBody.bind(this);\n    this._onClickBody = this._onClickBody.bind(this);\n    this._onWindowBlur = this._onWindowBlur.bind(this);\n  }\n\n  ngOnInit() {\n    this._init();\n  }\n\n  ngOnDestroy() {\n    this._removeClickOutsideListener();\n    this._removeAttachOutsideOnClickListener();\n    this._removeWindowBlurListener();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['attachOutsideOnClick'] || changes['exclude'] || changes['emitOnBlur']) {\n      this._init();\n    }\n  }\n\n  private _init() {\n    if (this.clickOutsideEvents !== '') {\n      this._events = this.clickOutsideEvents.split(',').map(e => e.trim());\n    }\n\n    this._excludeCheck();\n\n    if (this.attachOutsideOnClick) {\n      this._initAttachOutsideOnClickListener();\n    } else {\n      this._initOnClickBody();\n    }\n\n    if (this.emitOnBlur) {\n      this._initWindowBlurListener();\n    }\n  }\n\n  private _initOnClickBody() {\n    if (this.delayClickOutsideInit) {\n      setTimeout(this._initClickOutsideListener.bind(this));\n    } else {\n      this._initClickOutsideListener();\n    }\n  }\n\n  private _excludeCheck() {\n    if (this.exclude) {\n      try {\n        const nodes = Array.from(this.document.querySelectorAll(this.exclude)) as Array<HTMLElement>;\n        if (nodes) {\n          this._nodesExcluded = nodes;\n        }\n      } catch (err) {\n        console.error('[ng-click-outside] Check your exclude selector syntax.', err);\n      }\n    }\n  }\n\n  private _onClickBody(ev: Event) {\n    if (!this.clickOutsideEnabled) {\n      return;\n    }\n\n    if (this.excludeBeforeClick) {\n      this._excludeCheck();\n    }\n\n    if (!this._el.nativeElement.contains(ev.target) && !this._shouldExclude(ev.target)) {\n      this._emit(ev);\n\n      if (this.attachOutsideOnClick) {\n        this._removeClickOutsideListener();\n      }\n    }\n  }\n\n  /**\n   * Resolves problem with outside click on iframe\n   * @see https://github.com/arkon/ng-click-outside/issues/32\n   */\n  private _onWindowBlur(ev: Event) {\n    setTimeout(() => {\n      if (!this.document.hidden) {\n        this._emit(ev);\n      }\n    });\n  }\n\n  private _emit(ev: Event) {\n    if (!this.clickOutsideEnabled) {\n      return;\n    }\n\n    this._ngZone.run(() => this.clickOutside.emit(ev));\n  }\n\n  private _shouldExclude(target: any): boolean {\n    for (let excludedNode of this._nodesExcluded) {\n      if (excludedNode.contains(target)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  private _initClickOutsideListener() {\n    this._ngZone.runOutsideAngular(() => {\n      this._events.forEach(e => this.document.addEventListener(e, this._onClickBody));\n    });\n  }\n\n  private _removeClickOutsideListener() {\n    this._ngZone.runOutsideAngular(() => {\n      this._events.forEach(e => this.document.removeEventListener(e, this._onClickBody));\n    });\n  }\n\n  private _initAttachOutsideOnClickListener() {\n    this._ngZone.runOutsideAngular(() => {\n      this._events.forEach(e => this._el.nativeElement.addEventListener(e, this._initOnClickBody));\n    });\n  }\n\n  private _removeAttachOutsideOnClickListener() {\n    this._ngZone.runOutsideAngular(() => {\n      this._events.forEach(e => this._el.nativeElement.removeEventListener(e, this._initOnClickBody));\n    });\n  }\n\n  private _initWindowBlurListener() {\n    this._ngZone.runOutsideAngular(() => {\n      window.addEventListener('blur', this._onWindowBlur);\n    });\n  }\n\n  private _removeWindowBlurListener() {\n    this._ngZone.runOutsideAngular(() => {\n      window.removeEventListener('blur', this._onWindowBlur);\n    });\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {NgClickOutsideDirective} from './ng-click-outside.directive';\n\n/**\n * @deprecated use NgClickOutsideDirective directly as it is a Standalone Component, the Module will be removed in Version 12\n */\n@NgModule({\n  imports: [NgClickOutsideDirective],\n  exports: [NgClickOutsideDirective]\n})\nexport class NgClickOutsideModule {\n}\n","/*\n * Public API Surface of ng-click-outside2\n */\n\nexport * from './lib/ng-click-outside.module';\nexport * from './lib/ng-click-outside.directive';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}